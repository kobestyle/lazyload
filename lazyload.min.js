(function(e,t){if(typeof exports==="object"){module.exports=t()}else if(typeof define==="function"&&define.amd){define(t)}else{e.lazyload=t()}})(this,function(){if(typeof Object.assign!="function"){Object.assign=function(e){"use strict";if(e==null){throw new TypeError("Cannot convert undefined or null to object")}e=Object(e);for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n!=null){for(var i in n){if(Object.prototype.hasOwnProperty.call(n,i)){e[i]=n[i]}}}}return e}}function e(e,r){var a={threshold:0,failureLimit:0,container:window,event:"scroll",effect:"show",elapsed:500,dataAttribute:"origin",throttleTime:300,skipInvisible:true,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"},f,l;var d=A(e.length,"Number")?[].slice.call(e):[e];var u=function(){var e;return function(t,n){if(!e){e=new Event(n,{bubbles:true,cancelable:true})}return t.dispatchEvent(e)}}();r=A(r,"Object")?Object.assign({},a,r):a;l=A(r.throttleTime,"Number")?w(p,r.throttleTime):p;f=r.container=r.container===undefined||r.container===window?window:r.container;f.addEventListener(r.event,function(){return l()});d.forEach(function(e){var t;e.isImg=e.nodeName.toLowerCase()==="img";e.loaded=false;if(e.isImg&&!!e.getAttribute("src")===false){e.setAttribute("src",r.placeholder)}e.addEventListener("appear",t=function(){s.call(e);e.removeEventListener("appear",t)})});window.addEventListener("resize",function(){l()});document.addEventListener("DOMContentLoaded",function(){l()});function s(){var e=this,t={show:"display",fadeIn:"opacity"};if(!this.loaded){var n=r.appear,i=r.load;if(A(n,"Function")){n.call(this,d.length,r)}var o=new Image,a=e.getAttribute("data-"+r.dataAttribute);o.addEventListener("load",function(){e.style.display="none";if(e.isImg){e.setAttribute("src",a)}else{e.style.style.backgroundImage="url("+r.dataAttribute+")"}e.style.display="block";if(r.effect!=="show"){c(e,t[r.effect],r.elapsed,"linear",null)}e.loaded=true;d=d.filter(function(e){return!e.loaded});if(A(i,"Function")){i.call(e,d.length,r)}});o.src=a}}function c(e,t,n,i,o){var r=Math.ceil(n/17),a=0,f,l;var d=window.requestAnimation||function(e){setTimeout(e,17)};if(t==="opacity"){e.style[t]=l=0;f=1/r}function u(){l=l+f>1?1:l+f;e.style[t]=l;if(++a<=r){A(o,"Function")&&o(l);d(u)}}u()}function w(e,t){var n,i,o,r;var a=0;return function e(){n=this;i=arguments;var l=new Date-a;if(!r)if(l>=t)f();else r=setTimeout(f,t-l);return o};function f(){r=0;a=+new Date;o=e.apply(n,i);n=null;i=null}}function A(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function g(e){return window.getComputedStyle(e,null).display==="none"}function p(){var e=0;d.forEach(function(a){if(r.skipInvisible&&g(a)){return false}if(t(a,r)||o(a,r)){return false}else if(!i(a,r)&&!n(a,r)){u(a,"appear");e=0}else{if(++e>r.failureLimit){return false}}})}}function t(e,t){var n,i=t.container,o=e.getBoundingClientRect();if(i===undefined||i===window){n=window.pageYOffset}else{n=i.getBoundingClientRect().top+window.pageYOffset}return n>=o.top+window.pageYOffset+t.threshold+o.height}function n(e,t){var n,i=t.container,o=e.getBoundingClientRect(),r;if(i===undefined||i===window){n=window.innerWidth+window.pageXOffset}else{r=i.getBoundingClientRect();n=r.width+r.left+window.pageXOffset}return n<=o.left+window.pageXOffset-t.threshold}function i(e,t){var n,i=t.container,o=e.getBoundingClientRect(),r;if(i===undefined||i===window){n=window.innerHeight+window.pageYOffset}else{r=i.getBoundingClientRect(),n=r.top+r.height+window.pageYOffset}return n<=o.top+window.pageYOffset-t.threshold}function o(e,t){var n,i=t.container,o=e.getBoundingClientRect();if(i===undefined||i===window){n=window.pageXOffset}else{n=i.getBoundingClientRect().left+window.pageXOffset}return n>=o.left+window.pageXOffset+ +t.threshold+o.width}return e});